{% extends '::base.html.twig' %}

{%  block body %}
	<h1>Pack</h1>
	<p>
		{% if entity.getIsCurrent() %}
			This is the latest pack, please help translating it fully!
		{% else %}
			This pack is available but it is not the latest pack, please consider translating the latest one!
		{% endif %}
	</p>
	
	<table class="table table-condensed table-small">
	    <tbody>
	        <tr>
	            <th>Project</th>
	            <td>{{ entity.project }}</td>
	        </tr>
	        <tr>
	            <th>Name</th>
	            <td>{{ entity.name }}</td>
	        </tr>
	        <tr>
	            <th>Version</th>
	            <td>{{ entity.version }}</td>
	        </tr>
	    </tbody>
	</table>
	
	<br/>

	<table class="table">
	
		<tr>
			<th></th>
			{%  for cat in stats['categories'] %}
				<th>{{ cat | default("Overall")}}</th>
			{%  endfor %}
		</tr>
		{% for language, statistics in stats['statistics'] %}
			<tr class="translation_stat">
				<th>{{ language }}</th>
				{%  for cat in stats['categories'] %}
					<td
						class="clickable translation_stat"
					    style="background-color:{{ color_shade("#800","#080",statistics['statistics'][cat]['percent']/100, 0.7) }}; border: 1px solid {{ last_color_shade() }};" 
					    onclick="javascript:window.location='{{ path('translate', {'pack_id': entity.id, 'language_code': statistics['code'], 'category': cat}) }}'">
					    <span class="translation_stat_percent">{{ '%.1f' | format(statistics['statistics'][cat]['percent']) }}%</span>
					    <br/>({{ statistics['statistics'][cat]['translated'] }}/{{ statistics['statistics'][cat]['total'] }})
					</td>
				{%  endfor %}
			</tr>
		{% endfor %}
		<tr>
			<th></th>
			{%  for cat in stats['categories'] %}
				<th>{{ cat | default("Overall")}}</th>
			{%  endfor %}
		</tr>
	</table>
	
	<ul class="record_actions">
	    <li>
	        <a href="{{ path('packs') }}">
	            Back to the list
	        </a>
	    </li>
	    <li>
	        <a href="{{ path('packs_edit', { 'id': entity.id }) }}">
	            Edit
	        </a>
	    </li>
	    <li>
	        <form action="{{ path('pack_autocomplete', { 'pack_id': entity.id }) }}" method="post">
	            <button type="submit">Autocomplete</button>
	        </form>
	    </li>
	    <li>
	        <form action="{{ path('pack_setcurrent', { 'pack_id': entity.id }) }}" method="post">
	            <button type="submit">Set as current pack</button>
	        </form>
	    </li>
	    <li>
	        <form action="{{ path('packs_delete', { 'id': entity.id }) }}" method="post">
	            {{ form_widget(delete_form) }}
	            <button type="submit">Delete</button>
	        </form>
	    </li>
	</ul>
{% endblock %}
